(function($){$.fn.conditionize=function(options){var settings=$.extend({updateOn:["change"],onload:true,ifTrue:"show",ifFalse:"hide"},options);if(Array.isArray(settings.updateOn)){settings.updateOn=settings.updateOn.join(" ")}function prepareActions(e){if(Array.isArray(e)&&e.length===1){e=e[0]}if(e===null||e===false||e==="ignore"){return[]}if(typeof e==="string"&&e in $.fn.conditionize.actions){return[e]}if(typeof e==="function"){return[e]}if(Array.isArray(e)&&e.every(function(e){return typeof e==="string"&&e in $.fn.conditionize.actions||typeof e==="function"})){return e}throw new TypeError("Incorrect action type for ifTrue or ifFalse."+"ifTrue/ifFalse must be either a string with default action name,"+'i.e. one of "show", "hide", "clear", "trigger" or a function with '+"one argument ($section);  or array consisting of them.")}settings.ifTrue=prepareActions(settings.ifTrue);settings.ifFalse=prepareActions(settings.ifFalse);var handler=function(e,i){var n;if(e){n=settings.ifTrue}else{n=settings.ifFalse}n.forEach(function(e){if(typeof e==="string"){if(e.startsWith("trigger")){if(e==="trigger"){$.fn.conditionize.actions[e](i,settings.updateOn)}else{$.fn.conditionize.actions[e](i,e.slice(8).split(/[\s,]+/))}}else{$.fn.conditionize.actions[e](i)}}else{if(typeof e==="function"){e(i)}}})};return this.each(function(){var $section=$(this);var cond=$(this).data("condition");var allFields=[];cond=cond.replace($.fn.conditionize.re,function(e,i){var n=i.substring(0,1)==="#"?i:"[name='"+i+"']";if($(n).length){if(allFields.indexOf(n)===-1){allFields.push(n)}return'$.fn.conditionize.getValue("'+n+'")'}else{return i}});allFields.forEach(function(field){$(field).on(settings.updateOn,function(){handler(eval(cond),$section)})});if(settings.onload){if(document.readyState==="complete"){handler(eval(cond),$section)}else{$(window).on("load",function(){handler(eval(cond),$section)})}}})};$.extend($.fn.conditionize,{re:new RegExp("(#?[a-z0-9_\\[\\]-]+)"+"(?:(?=([^\"]*\"[^\"]*\")*[^\"]*$)(?=([^']*'[^']*')*[^']*$))","gi"),getValue:function(e){var i;if($(e).attr("type")==="radio"){i=$(e+":checked").val()}else{i=$(e).map(function(){if($(this).attr("type")==="checkbox"){return this.checked?this.value:false}else{return $(this).val()}}).get();if(i.length===1){i=i[0]}}return i},actions:{show:function(e){e.slideDown()},hide:function(e){e.slideUp()},clear:function(e){e.find("select, input").each(function(){if($(this).attr("type")==="radio"||$(this).attr("type")==="checkbox"){$(this).prop("checked",false)}else{$(this).val("")}$(this).trigger("change")})},trigger:function(e,i){if(Array.isArray(i)){i=i.join(" ")}e.trigger(i)}}})})(jQuery);
